# Telegram AI Bot با Google Gemini

این بات تلگرام فقط در یک تاپیک خاص از چنل شما پاسخ می‌دهد و از هوش مصنوعی Google Gemini استفاده می‌کند.

## نصب و راه‌اندازی

### 1. نصب وابستگی‌ها

```bash
npm install
```

### 2. تنظیمات

فایل `.env` شامل تنظیمات زیر است:

- `TELEGRAM_BOT_TOKEN`: توکن بات تلگرام شما
- `GOOGLE_API_KEY`: کلید API از Google AI Studio
- `CHANNEL_ID`: شناسه چنل (-1003221138302)
- `TOPIC_ID`: شناسه تاپیک (620)

### 3. اجرای بات

```bash
npm start
```

یا برای حالت توسعه با nodemon:

```bash
npm run dev
```

## ویژگی‌ها

- ✅ پاسخ فقط در تاپیک مشخص شده
- ✅ استفاده از Google Gemini 2.0 Flash
- ✅ ذخیره تاریخچه مکالمه برای هر کاربر
- ✅ سیستم صف و Rate Limiting (20 درخواست در دقیقه)
- ✅ نمایش "typing..." هنگام پردازش
- ✅ سرور Express برای health check
- ✅ مدیریت خطا و لاگ‌گذاری

## نکات مهم

1. بات باید در چنل به عنوان Admin اضافه شود
2. بات فقط به پیام‌های تاپیک مشخص شده پاسخ می‌دهد
3. تاریخچه مکالمه برای هر کاربر جداگانه نگهداری می‌شود
4. سرور روی پورت 3000 اجرا می‌شود (قابل تغییر در .env)

## دسترسی به تلگرام در ایران

چون تلگرام در ایران فیلتر است:

1. VPN خود را روشن کنید
2. بات را اجرا کنید: `npm start`

## API Endpoint

- `GET /` - وضعیت بات و اطلاعات پیکربندی
